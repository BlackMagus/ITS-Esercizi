<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
  <style>
    body {


        padding: 30px;
    }
    #root{
        display: flex;
        flex-wrap: wrap;
        gap: 20px;
        justify-content: center;
    }

    .card{
        background-color: white;
        border: #c9c9c9;
        padding:20px;
        border-radius: 15px;
        max-width: 350px;
        box-shadow: 0 4px 8px rgb(0, 0, 0, 0.1);
    }

    .card p{
        font-size: 0.8rem;
    }

    .card ul{
        list-style-type: none;
        padding-left: 0;
    }

    .card li{
        margin: 5px 0;
        padding: 2px 0;
    }

    .card h2{
        font-size: 1.4rem;;
    }

    .card small{
        color:cornflowerblue;
        font-weight: 700;
    }

  </style>
<body>
    <div id ="root"> </div>
    <script>
        const url = "https://jsonplaceholder.typicode.com/posts/1";
        const urlUsers = "https://jsonplaceholder.typicode.com/users/";
        const urlCommenti="https://jsonplaceholder.typicode.com/comments"; //?postId=1
        const divContainer=documents.getElementById("root");

        async function fetchDetailsPost(post) {
            const userP = fetch(urlUsers + post.userId).then((resp) => resp.json());
            const commentiP = fetch(urlCommenti + "?postId=" + post.id).then((resp) =>
            resp.json()
        )};

        async function loadAllPosts() {
            try{
                const response=await fetch(urlPosts)
                if (!response.ok){
                    throw new Error("Errore nella chiamata a " + urlPosts)
                }
                const allPosts=await response.json();
                const AllDataPromise =allPost.map((post) =>(
                    fetchDetailsPost(post)
                ))
                console.log(AllDataPromise)
                const allData=await Promise.all(allDataPromise)
                console.log(allData)
                divContainer.innerHTML = "";

                allPosts.forEach((post) => {
                divContainer.innerHTML += '<div class ="card"><h2>${post.title}</h2><p>${post.body}</p><small>${post.user}</small></div>';
                });
            } catch (err){
                console.error("Errore nel caricamento dei dati " + err);
            }
            
        }
        loadAllPosts()
    </script>
</body>
</html>